// Generated by CoffeeScript 1.10.0
(function() {
  var Blynk, Bridge, config, log4js, options, path;

  require('source-map-support').install();

  path = require('path');

  Blynk = require('blynk-library');

  log4js = require('log4js');

  global.core = require('./lib/core');

  config = require('./config');

  Bridge = require('./lib/Bridge');

  log4js.configure(path.normalize(__dirname + '/./log4js-config.json'), {
    cwd: path.normalize(__dirname + '/.')
  });

  core.logger = log4js.getLogger('system');

  core.blynk = new Blynk.Blynk(config.board.token, options = {
    certs_path: './node_modules/blynk-library/certs/'
  });

  core.inputVPin = new core.blynk.VirtualPin(0);

  core.inputVPin.on('write', function(param) {
    return console.log('V0 write: ' + param);
  });

  core.blynk.on('connect', function() {
    var bridgeConfig, i, len, ref, results;
    ref = config.bridges;
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      bridgeConfig = ref[i];
      results.push(core.bridges[bridgeConfig.name] = new Bridge(bridgeConfig));
    }
    return results;
  });

}).call(this);

//# sourceMappingURL=index.js.map
